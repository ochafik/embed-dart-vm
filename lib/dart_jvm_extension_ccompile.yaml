bits: 0 # 0 means the bits of Dart SDK
compiler:
  includes:
  - '{DART_SDK}/bin'
  - '{DART_SDK}/include'
  - '{JAVA_HOME}/include'
  - '{JAVA_HOME}/include/linux'
  - '{JAVA_HOME}/include/solaris'
  - '{JAVA_HOME}/include/windows'
  - '{JAVA_HOME}/include/darwin'
  input_files:
  - 'src/dart.cc'
  - 'src/isolate.cc'
  - 'src/library.cc'
  - 'src/main.cc'
clean: [ '*.exp', '*.lib', '*.o', '*.obj']
linker:
  input_files:
  - 'dart'
  - 'isolate'
  - 'library'
  - 'main'
platforms:
  linux:
    compiler:
      arguments: ['-fPIC', '-Wall', '-std=c++11']
    linker:
      arguments: ['-shared', '-ldl', '-lstdc++']
      output_file: 'libdart_jvm_extension.so'
  macos:
    compiler:
      arguments: ['-fPIC', '-Wall', '-std=c++11']
    linker:
      arguments: ['-dynamiclib', '-undefined', 'dynamic_lookup']
      output_file: 'libdart_jvm_extension.dylib'
  windows:
    compiler:
      arguments: ['-std=c++11']
      defines: {'DART_SHARED_LIB':}
      # input_files:
      # - 'dart_jvm_extension_dllmain_win.cc'
    linker:
      arguments: ['/DLL']
      input_files:
      - 'dart.lib'
      # - 'dart_jvm_extension_dllmain_win'
      libpaths: ['{DART_SDK}/bin']
      output_file: 'dart_jvm_extension.dll'
